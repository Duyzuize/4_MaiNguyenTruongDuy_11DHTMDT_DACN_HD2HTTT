@model TourWebApp.Data.Models.TaiKhoan
@using TourWebApp.Data.Models

@{
    ViewData["Title"] = "H·ªì s∆° c√° nh√¢n";
    var ds = ViewBag.DonCuaToi as List<DonDatTour>;
}

<link rel="stylesheet" href="~/css/profile.css" />
<link rel="stylesheet" href="~/css/doncuatoi.css" />

<div class="profile-wrapper">
    <div class="profile-card">

        <h3>üë§ H·ªì s∆° c√° nh√¢n</h3>
        <p>C·∫≠p nh·∫≠t th√¥ng tin t√†i kho·∫£n c·ªßa b·∫°n</p>

        @if (ViewBag.ThongBao != null)
        {
            <div class="profile-success">@ViewBag.ThongBao</div>
        }

        <form method="post">
            <input type="hidden" asp-for="IdTaiKhoan" />

            <div class="form-group">
                <label>H·ªç v√† t√™n</label>
                <input asp-for="HoTen" placeholder="Nh·∫≠p h·ªç t√™n" />
            </div>

            <div class="form-group">
                <label>Email</label>
                <input value="@Model.Email" readonly class="readonly-input" />
            </div>

            <div class="form-group">
                <label>S·ªë ƒëi·ªán tho·∫°i</label>
                <input asp-for="SoDienThoai" placeholder="Nh·∫≠p s·ªë ƒëi·ªán tho·∫°i" />
            </div>

            <div class="form-group">
                <label>ƒê·ªãa ch·ªâ</label>
                <textarea asp-for="DiaChi" placeholder="Nh·∫≠p ƒë·ªãa ch·ªâ"></textarea>
            </div>

            <button class="btn-save">L∆∞u thay ƒë·ªïi</button>
        </form>

        <!-- =================== ƒê∆†N C·ª¶A T√îI =================== -->
        <div class="my-orders">
            <h4>üì¶ ƒê∆°n c·ªßa t√¥i</h4>

            @if (ds != null && ds.Any())
            {
                foreach (var don in ds)
                {
                    <div class="order-item">

                        <div class="order-top">
                            <span><strong>M√£ ƒë∆°n:</strong> @don.MaBooking</span>
                            <span class="status @don.TrangThai">@don.TrangThai</span>
                        </div>

                        <div class="order-body">
                            <p><strong>Tour:</strong> @don.IdTourNavigation?.TenTour</p>
                            <p><strong>Ng√†y ƒë·∫∑t:</strong> @don.NgayDat.ToString("dd/MM/yyyy HH:mm")</p>
                            <p><strong>T·ªïng ti·ªÅn:</strong> @don.TongTien.ToString("N0") ƒë</p>
                        </div>

                       
                        <div class="order-timeline animated">

                            <!-- B∆Ø·ªöC 1 -->
                            <div class="step done tooltip-box">
                                <span class="circle"></span>
                                <span class="label">T·∫°o ƒë∆°n</span>
                                <small>@don.NgayDat.ToString("HH:mm dd/MM")</small>

                                <div class="tooltip-content">
                                    üü° <b>ƒê∆°n ƒë√£ ƒë∆∞·ª£c t·∫°o</b><br/>
                                    Th·ªùi gian t·∫°o: @don.NgayDat.ToString("HH:mm dd/MM/yyyy")
                                </div>
                            </div>

                            <div class="line"></div>

                            <!-- B∆Ø·ªöC 2 -->
                            <div class="step @(don.TrangThai == "ThanhToanThanhCong" ? "done" : "") tooltip-box">
                                <span class="circle"></span>
                                <span class="label">Thanh to√°n</span>
                                <small>
                                    @(don.NgayThanhToan.HasValue ? don.NgayThanhToan.Value.ToString("HH:mm dd/MM") : "--")
                                </small>

                                <div class="tooltip-content">
                                    @if (don.TrangThai == "ChoThanhToan")
                                    {
                                        <text>
                                        üü° <b>Ch·ªù thanh to√°n</b><br/>
                                        ƒê∆°n ƒë∆∞·ª£c gi·ªØ ch·ªó trong 10 ph√∫t.<br/>
                                        Vui l√≤ng thanh to√°n tr∆∞·ªõc khi h·∫øt h·∫°n.
                                        </text>
                                    }
                                    else
                                    {
                                        <text>
                                        üü¢ <b>ƒê√£ thanh to√°n</b><br/>
                                        H·ªá th·ªëng ƒë√£ nh·∫≠n ti·ªÅn v√† x√°c nh·∫≠n ƒë∆°n.
                                        </text>
                                    }
                                </div>
                            </div>

                            <div class="line"></div>

                            <!-- B∆Ø·ªöC 3 -->
                            <div class="step @(don.TrangThai == "DaHuy" ? "cancel" : "done") tooltip-box">
                                <span class="circle"></span>
                                <span class="label">Ho√†n t·∫•t / H·ªßy</span>
                                <small>@(don.TrangThai == "DaHuy" ? "ƒê√£ h·ªßy" : "Ho√†n t·∫•t")</small>

                                <div class="tooltip-content">
                                    @if (don.TrangThai == "DaHuy")
                                    {
                                        <text>
                                        üî¥ <b>ƒê∆°n ƒë√£ b·ªã h·ªßy</b><br/>
                                        Nguy√™n nh√¢n: H·∫øt th·ªùi gian thanh to√°n.
                                        </text>
                                    }
                                    else
                                    {
                                        <text>
                                        üü¢ <b>ƒê∆°n ho√†n t·∫•t</b><br/>
                                        Tour ƒë√£ ƒë∆∞·ª£c x√°c nh·∫≠n th√†nh c√¥ng.
                                        </text>
                                    }
                                </div>
                            </div>

                        </div>


                        <div class="order-actions">
                            <a class="btn-view" href="/TaiKhoan/ChiTietDon?idDon=@don.IdDon">Xem chi ti·∫øt</a>

                            @if (don.TrangThai == "ChoThanhToan")
                            {
                                <a class="btn-extend" href="/DatTour/GiaHanThanhToan?idDon=@don.IdDon">
                                    Gia h·∫°n 5 ph√∫t
                                </a>
                            }
                        </div>

                    </div>
                }
            }
            else
            {
                <p>üòø B·∫°n ch∆∞a c√≥ ƒë∆°n ƒë·∫∑t tour n√†o.</p>
            }
        </div>

    </div>
</div>
