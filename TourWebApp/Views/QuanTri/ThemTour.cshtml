@model TourWebApp.Data.Models.Tour
@{
    Layout = "_LayoutAdmin";
    var loaiTours = ViewBag.LoaiTours as List<TourWebApp.Data.Models.LoaiTour> ?? new();
}

<div class="container-fluid">
    <h4 class="mb-3 fw-bold">‚ûï Th√™m tour m·ªõi</h4>

    @if (!ViewData.ModelState.IsValid && ViewData.ModelState.Values.Any(v => v.Errors.Count > 0))
    {
        <div class="alert alert-danger">
            @foreach (var item in ViewData.ModelState.Values.SelectMany(v => v.Errors))
            {
                <div>‚ùå @item.ErrorMessage</div>
            }
        </div>
    }

   <form asp-action="ThemTour" method="post">
    @Html.AntiForgeryToken()

        <div class="card shadow-sm p-4">
            <div class="row g-3">

                <div class="col-md-6">
                    <label class="form-label">M√£ tour</label>
                    <input asp-for="MaTour" class="form-control" />
                </div>

               <div class="col-md-6">
                    <label class="form-label">T√™n tour</label>
                    <input asp-for="TenTour" class="form-control" required />
                </div>

                <div class="col-md-6">
                    <label class="form-label">Lo·∫°i tour</label>
                    <select asp-for="IdLoaiTour" class="form-select" required>
                        <option value="">-- Ch·ªçn lo·∫°i tour --</option>
                        @foreach (var item in loaiTours)
                        {
                            <option value="@item.IdLoaiTour">@item.TenLoai</option>
                        }
                    </select>
                </div>

                <div class="col-md-6">
                    <label class="form-label">ƒê·ªãa ƒëi·ªÉm</label>
                    <input asp-for="DiaDiem" class="form-control" />
                </div>

                <div class="col-md-6">
                    <label class="form-label">Th·ªùi gian</label>
                    <input asp-for="ThoiGian" class="form-control" placeholder="VD: 3N2ƒê" />
                </div>

               <div class="col-md-6">
                    <label class="form-label fw-semibold">Ph∆∞∆°ng ti·ªán</label>
                    <select asp-for="PhuongTien" class="form-select" required>
                        <option value="">-- Ch·ªçn ph∆∞∆°ng ti·ªán --</option>
                        <option value="Xe du l·ªãch">üöå Xe du l·ªãch</option>
                        <option value="M√°y bay">‚úàÔ∏è M√°y bay</option>
                        <option value="T√†u h·ªèa">üöÜ T√†u h·ªèa</option>
                        <option value="Ca n√¥">üö§ Ca n√¥</option>
                        <option value="Xe m√°y">üèç Xe m√°y</option>
                    </select>
                </div>


                <div class="col-md-4">
                    <label class="form-label fw-semibold">Gi√° g·ªëc</label>
                    <input asp-for="GiaGoc" type="number" class="form-control" />
                </div>

                <div class="col-md-4">
                    <label class="form-label fw-semibold">% Gi·∫£m</label>
                    <input asp-for="PhanTramGiam" class="form-control" id="phanTramGiam" />
                </div>

                <div class="col-md-4">
                    <label class="form-label fw-semibold">Gi√° khuy·∫øn m√£i</label>
                    <input asp-for="GiaKhuyenMai" class="form-control" id="giaKhuyenMai" readonly />
                </div>

                <div class="col-12">
                    <label class="form-label">M√¥ t·∫£</label>
                    <textarea asp-for="MoTa" rows="4" class="form-control"></textarea>
                </div>

                <h5 class="fw-bold text-primary mt-4 mb-2">üí∞ Gi√° tour theo ƒë·ªëi t∆∞·ª£ng</h5>

                <div class="row">

                    <!-- GI√Å NG∆Ø·ªúI L·ªöN -->
                    <div class="col-md-4">
                        <label class="form-label fw-semibold">Gi√° ng∆∞·ªùi l·ªõn *</label>
                        <input type="number" id="giaNguoiLon" name="GiaNguoiLon"
                            class="form-control" min="0" required />
                    </div>

                    <!-- % GI·∫¢M TR·∫∫ EM -->
                    <div class="col-md-4">
                        <label class="form-label fw-semibold">% gi·∫£m cho tr·∫ª em</label>
                        <input type="range" id="phanTramTreEm" name="PhanTramTreEm" 
                            min="0" max="100" value="50" class="form-range">
                        <span id="percentLabel" class="fw-bold text-primary">50%</span>
                    </div>

                    <!-- GI√Å TR·∫∫ EM (T·ª∞ ƒê·ªòNG T√çNH) -->
                    <div class="col-md-4">
                        <label class="form-label fw-semibold">Gi√° tr·∫ª em (t·ª± t√≠nh)</label>
                        <input id="giaTreEmPreview" class="form-control" readonly />
                    </div>

                    <!-- EM B√â C√ì PH√ç HAY MI·ªÑN PH√ç -->
                    <div class="col-md-4 mt-3">
                        <label class="form-label fw-semibold">Em b√©</label>
                        <select id="coPhiEmBe" name="CoPhiEmBe" class="form-select">
                            <option value="0">Mi·ªÖn ph√≠</option>
                            <option value="1">C√≥ t√≠nh ph√≠</option>
                        </select>
                    </div>

                    <!-- GI√Å EM B√â -->
                    <div class="col-md-4 mt-3">
                        <label class="form-label fw-semibold">Gi√° em b√©</label>
                        <input id="giaEmBe" name="GiaEmBe" 
                            type="number" class="form-control" 
                            value="0" min="0" readonly />
                    </div>

                </div>

            </div>

            <div class="mt-4 text-end">
                <a asp-action="QuanLyTour" class="btn btn-secondary">Quay l·∫°i</a>
                <button type="submit" class="btn btn-primary px-4">
                    üíæ L∆∞u tour
                </button>
            </div>
        </div>
    </form>
</div>

    <script src="~/js/tinh-gia-tour.js"></script>
    <script src="~/js/gia-tour.js"></script>

