@model TourWebApp.Data.Models.Tour
@{
    Layout = "_LayoutAdmin";
   var loaiTours = ViewBag.LoaiTours as List<TourWebApp.Data.Models.LoaiTour> ?? new List<TourWebApp.Data.Models.LoaiTour>();
}

<div class="container-fluid">
    <h4 class="mb-3 fw-bold">‚úèÔ∏è S·ª≠a th√¥ng tin tour</h4>

   <form asp-action="SuaTour" method="post" enctype="multipart/form-data">
   <input type="hidden" asp-for="IdTour" />

        <div class="card shadow-sm p-4">
            <div class="row g-3">
                <div class="col-md-6">
                    <label class="form-label">M√£ tour</label>
                    <input asp-for="MaTour" class="form-control bg-light" readonly />
                </div>

                <div class="col-md-6">
                    <label class="form-label">T√™n tour</label>
                    <input asp-for="TenTour" class="form-control" />
                </div>

                <div class="col-md-6">
                    <label class="form-label">Lo·∫°i tour</label>
                    <select asp-for="IdLoaiTour" class="form-select">
                        <option value="">-- Ch·ªçn lo·∫°i tour --</option>
                        @foreach (var item in loaiTours)
                        {
                            <option value="@item.IdLoaiTour"
                                    selected="@(item.IdLoaiTour == Model.IdLoaiTour)">
                                @item.TenLoai
                            </option>
                        }
                    </select>
                </div>

                <div class="col-md-6">
                    <label class="form-label">ƒê·ªãa ƒëi·ªÉm</label>
                    <input asp-for="DiaDiem" class="form-control" />
                </div>

                <div class="col-md-6">
                    <label class="form-label">Th·ªùi gian</label>
                    <input asp-for="ThoiGian" class="form-control" placeholder="VD: 3N2ƒê"/>
                </div>

                <div class="col-md-6">
                    <label class="form-label fw-semibold">Ph∆∞∆°ng ti·ªán</label>
                    <select asp-for="PhuongTien" class="form-select" required>
                        <option value="">-- Ch·ªçn ph∆∞∆°ng ti·ªán --</option>
                        <option value="Xe du l·ªãch">üöå Xe du l·ªãch</option>
                        <option value="M√°y bay">‚úàÔ∏è M√°y bay</option>
                        <option value="T√†u h·ªèa">üöÜ T√†u h·ªèa</option>
                        <option value="Ca n√¥">üö§ Ca n√¥</option>
                        <option value="Xe m√°y">üèç Xe m√°y</option>
                    </select>
                </div>


               <div class="col-md-4">
                    <label class="form-label fw-semibold">Gi√° g·ªëc</label>
                    <input asp-for="GiaGoc" class="form-control price-input" id="giaGoc" />
                </div>

                <div class="col-md-4">
                    <label class="form-label fw-semibold">% Gi·∫£m</label>
                    <input asp-for="PhanTramGiam" class="form-control" id="phanTramGiam" />
                </div>

                <div class="col-md-4">
                    <label class="form-label fw-semibold">Gi√° khuy·∫øn m√£i</label>
                    <input asp-for="GiaKhuyenMai" class="form-control price-input" id="giaKhuyenMai" readonly />
                </div>

                <div class="col-12">
                    <label class="form-label">M√¥ t·∫£</label>
                    <textarea asp-for="MoTa" rows="4" class="form-control"></textarea>
                </div>

                <div class="col-12 mt-4">
                    <h5 class="fw-bold text-primary mb-2">üí≤ Gi√° chi ti·∫øt theo ƒë·ªëi t∆∞·ª£ng</h5>

                    <div class="row g-3">

                        <!-- GI√Å NG∆Ø·ªúI L·ªöN -->
                        <div class="col-md-4">
                            <label class="form-label fw-semibold">Gi√° ng∆∞·ªùi l·ªõn</label>
                            <input type="number" name="GiaNguoiLon"
                                class="form-control"
                                value="@ViewBag.GiaNguoiLon"
                                min="0" required />
                        </div>

                        <!-- GI√Å TR·∫∫ EM -->
                        <div class="col-md-4">
                            <label class="form-label fw-semibold">Gi√° tr·∫ª em</label>
                            <input type="number" name="GiaTreEm"
                                class="form-control"
                                value="@ViewBag.GiaTreEm"
                                min="0" required />
                        </div>

                        <!-- GI√Å EM B√â -->
                        <div class="col-md-4">
                            <label class="form-label fw-semibold">Gi√° em b√©</label>
                            <input type="number" name="GiaEmBe"
                                class="form-control"
                                value="@ViewBag.GiaEmBe"
                                min="0" required />
                        </div>

                    </div>
                </div>


                <div class="col-12 mt-3">
                    <label class="form-label fw-semibold">H√¨nh ·∫£nh tour</label>

                    <!-- Upload ·∫£nh m·ªõi -->
                    <div id="drop-zone" class="drop-zone mb-3">
                        <p class="text-muted">üì∑ K√©o th·∫£ ho·∫∑c click ƒë·ªÉ ch·ªçn nhi·ªÅu ·∫£nh</p>
                        <input type="file" name="HinhAnhFiles" id="fileInput" multiple accept="image/*" hidden />
                    </div>

                    <!-- ·∫¢nh c≈© -->
                    <h6 class="fw-bold mb-2">·∫¢nh hi·ªán t·∫°i</h6>

                    <div class="preview-grid">
                        @foreach (var h in Model.HinhTours)
                        {
                            <div class="preview-item">
                                <img src="~/img/tours/@h.UrlHinh" />

                                <!-- Ch·ªçn l√†m ·∫£nh ƒë·∫°i di·ªán -->
                                <label class="d-block mt-1">
                                    <input type="radio"
                                        name="Thumbnail"
                                        value="@h.UrlHinh"
                                        @(Model.HinhAnh == h.UrlHinh ? "checked" : "") />
                                    ·∫¢nh ƒë·∫°i di·ªán
                                </label>
                            </div>
                        }
                    </div>
                </div>

            </div>

            <div class="mt-4 text-end">
                <a asp-action="QuanLyTour" class="btn btn-secondary">Quay l·∫°i</a>
                <button type="submit" class="btn btn-primary px-4">
                    üíæ L∆∞u tour
                </button>
            </div>
        </div>
    </form>
</div>
    <script src="~/js/upload-anh-tour.js"></script>
    <script src="~/js/tinh-gia-tour.js"></script>
    <link rel="stylesheet" href="~/css/upload-tour.css" />
